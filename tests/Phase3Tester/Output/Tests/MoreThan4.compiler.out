const vmt_MT4
  :MT4.Start
  :MT4.Change

func Main [in 0, out 3, local 0]
  $t8 = HeapAllocZ(4)
  [$t8] = :vmt_MT4
  if $t8 goto :null1
  Error("null pointer")
null1:
  $t7 = [$t8]
  $t7 = [$t7]
  $a0 = $t8
  $a1 = 1
  $a2 = 2
  $a3 = 3
  out[0] = 4
  out[1] = 5
  out[2] = 6
  call $t7
  $t6 = $v0
  PrintIntS($t6)
  ret

func MT4.Start [in 3, out 3, local 0]
  $t1 = $a0
  $t8 = $a1
  $t7 = $a2
  $t6 = $a3
  $t5 = in[0]
  $t4 = in[1]
  $t3 = in[2]
  PrintIntS($t8)
  PrintIntS($t7)
  PrintIntS($t6)
  PrintIntS($t5)
  PrintIntS($t4)
  PrintIntS($t3)
  $t2 = [$t1]
  $t2 = [$t2+4]
  $a0 = $t1
  $a1 = $t3
  $a2 = $t4
  $a3 = $t5
  out[0] = $t6
  out[1] = $t7
  out[2] = $t8
  call $t2
  $t0 = $v0
  $v0 = $t0
  ret

func MT4.Change [in 3, out 0, local 0]
  $t8 = $a1
  PrintIntS($t8)
  $t8 = $a2
  PrintIntS($t8)
  $t8 = $a3
  PrintIntS($t8)
  $t8 = in[0]
  PrintIntS($t8)
  $t8 = in[1]
  PrintIntS($t8)
  $t8 = in[2]
  PrintIntS($t8)
  $v0 = 0
  ret


